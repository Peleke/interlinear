# Story 4.4: Exercise Result Feedback UI

## Status
Draft

## Story
**As a** developer,
**I want** a reusable exercise result feedback component,
**so that** consistent success/error messaging is shown across all exercise types.

## Acceptance Criteria
1. `ExerciseResult` component created
2. Component displays success message with XP earned (green background)
3. Component displays error message with correct answer (red background)
4. Component shows "Try Again" button on error (resets exercise)
5. Component has celebration animation on success (confetti or checkmark)
6. Component is mobile-responsive
7. Component can be reused by FillBlank and MultipleChoice components

## Tasks / Subtasks

- [ ] Create component `components/exercises/ExerciseResult.tsx` (AC: 1)
  - [ ] Define props interface:
    ```typescript
    interface ExerciseResultProps {
      isCorrect: boolean;
      xpEarned: number;
      correctAnswer?: string;
      onTryAgain?: () => void;
    }
    ```

- [ ] Implement success state (AC: 2, 5)
  - [ ] Green background with success icon
  - [ ] Message: "Correct! +{xpEarned} XP"
  - [ ] Celebration animation (CSS keyframes or Lottie)
  - [ ] Example:
    ```tsx
    <div className="bg-green-50 border-2 border-green-300 rounded-lg p-4 animate-bounce-once">
      ✅ Correct! +{xpEarned} XP
    </div>
    ```

- [ ] Implement error state (AC: 3, 4)
  - [ ] Red background with error icon
  - [ ] Message: "Not quite. The correct answer is: {correctAnswer}"
  - [ ] "Try Again" button (if onTryAgain provided)
  - [ ] Example:
    ```tsx
    <div className="bg-red-50 border-2 border-red-300 rounded-lg p-4">
      ❌ Not quite. The correct answer is: {correctAnswer}
      <br />
      {onTryAgain && (
        <button onClick={onTryAgain} className="mt-2 px-4 py-2 bg-blue-600 text-white rounded">
          Try Again
        </button>
      )}
    </div>
    ```

- [ ] Add celebration animation (AC: 5)
  - [ ] CSS bounce animation on success:
    ```css
    @keyframes bounce-once {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    .animate-bounce-once {
      animation: bounce-once 0.5s ease-in-out;
    }
    ```
  - [ ] Optional: Confetti library (react-confetti)

- [ ] Make mobile-responsive (AC: 6)
  - [ ] Full width on small screens
  - [ ] Adequate padding and font size for readability

- [ ] Integrate with exercise components (AC: 7)
  - [ ] Update FillBlankExercise to use ExerciseResult
  - [ ] Update MultipleChoiceExercise to use ExerciseResult
  - [ ] Replace inline result rendering with component

- [ ] Test component (AC: 1-7)
  - [ ] Render success state, verify animation plays
  - [ ] Render error state, verify correct answer shows
  - [ ] Click "Try Again", verify callback fires
  - [ ] Test on mobile (adequate size and readability)

## Dev Notes

### Animation Options
**Option 1: CSS Keyframes** (lightweight)
```css
@keyframes success-pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}
```

**Option 2: Confetti Library** (delightful)
```tsx
import Confetti from 'react-confetti';

{isCorrect && <Confetti numberOfPieces={100} recycle={false} />}
```

### Encouragement Messages
Rotate encouragement on errors:
```typescript
const ENCOURAGEMENTS = [
  "Keep practicing!",
  "Almost there!",
  "You'll get it next time!",
  "Don't give up!"
];
```

## Testing
**Unit Tests:** Render success/error states, verify DOM structure.

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-11-02 | 1.0 | Initial story | Bob |

## Dev Agent Record
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_
