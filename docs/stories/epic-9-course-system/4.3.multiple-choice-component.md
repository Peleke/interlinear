# Story 4.3: Multiple Choice Exercise Component

## Status
Draft

## Story
**As a** learner,
**I want** to answer multiple choice questions,
**so that** I can test my Spanish vocabulary knowledge.

## Acceptance Criteria
1. `MultipleChoiceExercise` component created
2. Component displays prompt/question
3. Radio buttons or clickable cards for each option
4. "Submit" button validates selected answer
5. On correct answer: Show success message + XP
6. On incorrect answer: Show correct answer + encouragement
7. After submission, disable options and submit button
8. Component handles loading and error states
9. Component is mobile-responsive with vertical option layout

## Tasks / Subtasks

- [ ] Create component `components/exercises/MultipleChoiceExercise.tsx` (AC: 1, 2)
  - [ ] Define props interface (same as FillBlankExercise)
  - [ ] Use Client Component
  - [ ] Render prompt as heading
  - [ ] Parse options from `exercise.options` (JSON array)

- [ ] Implement option selection (AC: 3, 9)
  - [ ] State: `const [selectedOption, setSelectedOption] = useState<string>('')`
  - [ ] Render options as clickable cards:
    ```tsx
    {exercise.options.map((option) => (
      <button
        key={option}
        onClick={() => setSelectedOption(option)}
        className={`
          w-full p-4 border-2 rounded-lg text-left
          ${selectedOption === option ? 'border-blue-500 bg-blue-50' : 'border-gray-300'}
        `}
      >
        {option}
      </button>
    ))}
    ```
  - [ ] Mobile: Stack options vertically

- [ ] Implement submit logic (AC: 4, 7, 8)
  - [ ] Same validation logic as FillBlankExercise
  - [ ] Disable options after submission:
    ```tsx
    <button
      disabled={result !== null || isLoading}
      className={result ? 'opacity-50 cursor-not-allowed' : ''}
    >
      {option}
    </button>
    ```

- [ ] Show result feedback (AC: 5, 6)
  - [ ] Highlight correct option in green
  - [ ] Highlight selected wrong option in red
  - [ ] Show success/error message (reuse from FillBlankExercise)

- [ ] Test component (AC: 1-9)
  - [ ] Render with 4 options
  - [ ] Click option, verify selection
  - [ ] Submit correct answer, verify success
  - [ ] Submit incorrect answer, verify error + correct answer highlighted
  - [ ] Test mobile view (options stack vertically)

## Dev Notes

### Option Layout
```
┌─────────────────────────┐
│ How do you say 'hello'? │ (Question)
├─────────────────────────┤
│ ○ adiós                 │ (Option 1)
│ ● hola              ✓   │ (Option 2 - selected, correct)
│ ○ gracias               │ (Option 3)
│ ○ por favor             │ (Option 4)
└─────────────────────────┘
```

### Result Highlighting
```typescript
function getOptionStyle(option: string) {
  if (!result) return 'border-gray-300';
  if (option === exercise.answer) return 'border-green-500 bg-green-50';
  if (option === selectedOption && !result.is_correct) return 'border-red-500 bg-red-50';
  return 'border-gray-300 opacity-50';
}
```

## Testing
**Unit Tests:** Similar to FillBlankExercise tests.

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-11-02 | 1.0 | Initial story | Bob |

## Dev Agent Record
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_
