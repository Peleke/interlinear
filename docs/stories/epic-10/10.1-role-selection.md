# Story 10.1: Role Selection Interface

**Epic:** Dialog Roleplay Tutor
**Priority:** High
**Effort:** 2 hours
**Dependencies:** None

---

## User Story

**As a** student
**I want to** choose which character to play in a dialog
**So that** I can practice speaking from that character's perspective

---

## Acceptance Criteria

- [ ] Button "ğŸ­ Practice this Dialog" appears in DialogViewer
- [ ] Modal/panel shows available characters from dialog
- [ ] User can select one character via radio buttons
- [ ] CEFR level selector (A1-C2) is displayed
- [ ] "Start Roleplay" button is enabled when both selections made
- [ ] UI shows dialog context and setting

---

## Technical Tasks

1. Create `components/dialogs/DialogRoleplayPanel.tsx`
   - Main component with 3 stages: selection, active, review
   - Props: `dialogId`, `exchanges`, `context`, `setting`

2. Create `components/dialogs/RoleSelector.tsx`
   - Extract unique speakers from exchanges
   - Radio button UI for character selection
   - Return selected speaker name

3. Wire up in `components/dialogs/DialogViewer.tsx`
   - Add "Practice this Dialog" button below "Play All"
   - Open modal/panel when clicked
   - Pass dialog data as props

4. Reuse `LevelSelector` component
   - Import from `components/tutor/LevelSelector.tsx`
   - Wire up level state

---

## UI Mockup

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ­ Practice This Dialog            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  Context: MarÃ­a and Carlos meet...  â”‚
â”‚  Setting: At a cafÃ© in Madrid       â”‚
â”‚                                     â”‚
â”‚  Choose your character:             â”‚
â”‚  â—‹ MarÃ­a                            â”‚
â”‚  â— Carlos  [selected]               â”‚
â”‚                                     â”‚
â”‚  Choose your level:                 â”‚
â”‚  [A1] [A2] [B1] [B2] [C1] [C2]     â”‚
â”‚       ^selected                     â”‚
â”‚                                     â”‚
â”‚  [Start Roleplay] [Cancel]          â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Test Cases

1. **Display characters:** All unique speakers from dialog shown as options
2. **Enable button:** "Start Roleplay" disabled until both character and level selected
3. **Visual feedback:** Selected options highlighted
4. **Cancel flow:** Modal closes, dialog viewer remains unchanged
5. **Context display:** Dialog context and setting shown above selectors

---

## Definition of Done

- [ ] Code written and self-reviewed
- [ ] Component renders without console errors
- [ ] All acceptance criteria met
- [ ] Manual testing on desktop and mobile
- [ ] Merged to main branch
